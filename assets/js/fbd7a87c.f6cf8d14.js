"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[361],{1937:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"getting-started/quickstart","title":"Quickstart","description":"Build your first flow with Timbal with 5 lines of code.","source":"@site/docs/getting-started/quickstart.md","sourceDirName":"getting-started","slug":"/getting-started/quickstart","permalink":"/docs/getting-started/quickstart","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar":"docsSidebar"},"sidebar":"docsSidebar","previous":{"title":"Installation","permalink":"/docs/getting-started/installation"},"next":{"title":"Model Capabilities","permalink":"/docs/getting-started/model_capabilities"}}');var s=n(4848),o=n(8453),h=n(5495);const r={sidebar_position:2,sidebar:"docsSidebar"},a="Quickstart",l={},c=[{value:"Part 1: Build a Simple Chatbot",id:"part-1-build-a-simple-chatbot",level:2},{value:"Part 2: Enhancing the Chatbot with Tools",id:"part-2-enhancing-the-chatbot-with-tools",level:2},{value:"Part 3: Enhancing the Chatbot with Memory",id:"part-3-enhancing-the-chatbot-with-memory",level:2}];function g(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"quickstart",children:"Quickstart"})}),"\n",(0,s.jsx)("h2",{className:"subtitle",style:{marginTop:"-17px",fontSize:"1.2rem",fontWeight:"normal"},children:(0,s.jsx)(t.p,{children:"Build your first flow with Timbal with 5 lines of code."})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(t.p,{children:["We'll start implementing an ",(0,s.jsx)(t.strong,{children:"agent"}),". It will be a ",(0,s.jsx)(t.strong,{children:"simple chatbot"})," and gradually enhance it with advanced features. Let's dive in!"]}),"\n",(0,s.jsxs)(t.p,{children:["Before moving forward, ensure you've completed the installation of Timbal. If you haven't set it up yet, follow the ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"/docs/getting-started/installation",children:"installation guide"})})," to get started."]}),"\n",(0,s.jsx)(t.h2,{id:"part-1-build-a-simple-chatbot",children:"Part 1: Build a Simple Chatbot"}),"\n",(0,s.jsx)(t.p,{children:"\ud83d\udee0 Let's create a simple chatbot that can respond to user messages."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsxs)(t.strong,{children:["1. Import the class ",(0,s.jsx)(t.code,{children:"Agent"})," from the ",(0,s.jsx)(t.code,{children:"timbal"})," package."]})}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:"from timbal import Agent"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsxs)(t.strong,{children:["2. Initialize an ",(0,s.jsx)(t.code,{children:"Agent"})," object."]})}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:"flow = Agent()"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"3. Set your environment variables"}),"\nBefore running your flow, make sure you have the keys needed set as environment variables in your ",(0,s.jsx)(t.code,{children:".env"})," file:"]}),"\n",(0,s.jsx)(t.p,{children:"\ud83d\udc40 It will depend on the LLM you're using, in this case, the default model is OpenAI."}),"\n",(0,s.jsx)(h.A,{language:"bash",title:".env",code:"OPENAI_API_KEY=your_api_key_here "}),"\n",(0,s.jsxs)(t.p,{children:["Only with the ",(0,s.jsx)(t.code,{children:"Agent"})," class we have a flow that represents a llm that receives a ",(0,s.jsx)(t.code,{children:"prompt"})," and returns a ",(0,s.jsx)(t.code,{children:"response"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Now let's run the chatbot!"}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:'response = flow.complete(prompt="What is the capital of Germany?")\nprint(response.content[0].text)'}),"\n",(0,s.jsx)(t.p,{children:"You will see an output like this:"}),"\n",(0,s.jsx)(t.p,{children:"The capital of Germany is Berlin."}),"\n",(0,s.jsx)(t.admonition,{title:"Congratulations!",type:"tip",children:(0,s.jsx)(t.p,{children:"You've just created your first Timbal flow!"})}),"\n",(0,s.jsx)(t.p,{children:"This is the simplest flow you can create."}),"\n",(0,s.jsx)(t.p,{children:"You can modify it as you want. For example, you can add tools to the agent."}),"\n",(0,s.jsx)(t.h2,{id:"part-2-enhancing-the-chatbot-with-tools",children:"Part 2: Enhancing the Chatbot with Tools"}),"\n",(0,s.jsx)(t.p,{children:"When the chatbot encounters questions it can't answer from memory, we'll equip it with a tool. This allows the bot to fetch relevant information in real time, improving its responses."}),"\n",(0,s.jsx)(t.p,{children:"For this example, we will use a tool capable of returning the current weather."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsxs)(t.strong,{children:["1. We have a ",(0,s.jsx)(t.code,{children:"search"})," tool defined."]})}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:"from timbal.steps.perplexity import search"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"2. Add an agent node to the flow with the tool."}),"\nWe need to add the tool to the llm as a new node."]}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:"flow = Agent(tools=[search])"}),"\n",(0,s.jsx)(t.p,{children:"Let's visualize the graph we've built."}),"\n",(0,s.jsx)(t.admonition,{title:"Visualize the flow",type:"tip",children:(0,s.jsxs)(t.p,{children:["You can visualize the flow by calling ",(0,s.jsx)(t.code,{children:"flow.plot()"}),"."]})}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("img",{src:"/timbal/img/dag_tools.png",style:{width:"50%"}})}),"\n",(0,s.jsx)(t.p,{children:"But these two examples do not retain the conversation:"}),"\n",(0,s.jsx)(h.A,{language:"text",code:"user: My name is David\nassistant: Hello David, how can I help you today?\nuser: What is my name?\nassistant: I don't know but you can tell me."}),"\n",(0,s.jsx)(t.p,{children:"Let's add memory to the chatbot."}),"\n",(0,s.jsx)(t.h2,{id:"part-3-enhancing-the-chatbot-with-memory",children:"Part 3: Enhancing the Chatbot with Memory"}),"\n",(0,s.jsx)(t.p,{children:"Let's add memory to the chatbot."}),"\n",(0,s.jsx)(t.p,{children:"It is very simple, we just need to set a context and a place to save the data."}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:"from timbal.state.savers import InMemorySaver\nstate_saver = InMemorySaver()\n\nflow = Agent(\n  state_saver=state_saver\n)"}),"\n",(0,s.jsxs)(t.p,{children:["And when we run the flow we have to add the ",(0,s.jsx)(t.code,{children:"RunContext()"})," parameter. In order to have the tracebility of that run and the previous."]}),"\n",(0,s.jsx)(h.A,{language:"python",title:"flow.py",code:"run_context = RunContext()\nflow_output_event = await agent.complete(context=run_context, prompt=prompt)\nrun_context = RunContext(parent_id=flow_output_event.run_id)"}),"\n",(0,s.jsx)(t.p,{children:"And the previous conversation will look like:"}),"\n",(0,s.jsx)(h.A,{language:"text",code:"user: My name is David\nassistant: Hello David, how can I help you today?\nuser: What is my name?\nassistant: Your name is David. Do you need anything else?"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"That's it!"})," With 5 lines of code we've created a chatbot that has memory and can search internet."]})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(g,{...e})}):g(e)}},5495:(e,t,n)=>{n.d(t,{A:()=>l});n(6540);var i=n(1765),s=n(4848);(void 0!==n.g?n.g:window).Prism=i.My;const o={...i.Zj.github,plain:{...i.Zj.github.plain,backgroundColor:"#181818",color:"#ffffff"},styles:i.Zj.github.styles.map((e=>({...e,types:e.types})))},h={from:"custom-highlight-pink",import:"custom-highlight-pink","=":"custom-highlight-pink",timbal:"custom-highlight-green",Agent:"custom-highlight-green",steps:"custom-highlight-green",perplexity:"custom-highlight-green",InMemorySaver:"custom-highlight-green",RunContext:"custom-highlight-green",twilio:"custom-highlight-green",whatsapp:"custom-highlight-green",model:"custom-highlight-orange",query:"custom-highlight-orange",context:"custom-highlight-orange",system_prompt:"custom-highlight-orange",tools:"custom-highlight-orange",parent_id:"custom-highlight-orange",id:"custom-highlight-orange",model_id:"custom-highlight-orange",to:"custom-highlight-orange",message:"custom-highlight-orange",template_sid:"custom-highlight-orange",template_params:"custom-highlight-orange",text:"custom-highlight-orange",voice_id:"custom-highlight-orange",memory_id:"custom-highlight-orange",memory_window_size:"custom-highlight-orange","(":"custom-highlight-yellow-dark",")":"custom-highlight-yellow-dark","[":"custom-highlight-purple-pink","]":"custom-highlight-purple-pink","{":"custom-highlight-yellow-dark","}":"custom-highlight-yellow-dark",",":"#fffff",Flow:"custom-highlight-green",await:"custom-highlight-pink",def:"custom-highlight-blue",async:"custom-highlight-blue","-":"#fffff",">":"#fffff",":":"#fffff",".":"#fffff",state:"custom-highlight-green",savers:"custom-highlight-green",Tool:"custom-highlight-green",TimbalPlatformSaver:"custom-highlight-green",return:"custom-highlight-pink",for:"custom-highlight-pink",in:"custom-highlight-pink",if:"custom-highlight-pink",datetime:"custom-highlight-green",elevenlabs:"custom-highlight-green",types:"custom-highlight-green",File:"custom-highlight-green",get_datetime:"custom-highlight-green-fn",send_whatsapp_message:"custom-highlight-green-fn",send_whatsapp_template:"custom-highlight-green-fn",validate:"custom-highlight-green-fn",complete:"custom-highlight-green-fn",print:"custom-highlight-green-fn",search:"custom-highlight-green-fn",search_internet:"custom-highlight-green-fn",stt:"custom-highlight-green-fn",tts:"custom-highlight-green-fn",run:"custom-highlight-green-fn",search_web:"custom-highlight-green-fn",set_input:"custom-highlight-green-fn",extract_text:"custom-highlight-green-fn",text_processor:"custom-highlight-green-fn",convert_to_database:"custom-highlight-green-fn",get_weather:"custom-highlight-green-fn",get_time:"custom-highlight-green-fn",add_step:"custom-highlight-green-fn",add_link:"custom-highlight-green-fn",set_output:"custom-highlight-green-fn",parse_documentation:"custom-highlight-green-fn",create_database:"custom-highlight-green-fn",add_llm:"custom-highlight-green-fn",compile:"custom-highlight-green-fn",str:"custom-highlight-green"},r=new RegExp(`(${Object.keys(h).map((e=>/^[a-zA-Z0-9_]+$/.test(e)?`\\b${e}\\b`:e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|")})`,"g"),a=/"([^"]*)"/g;function l(e){const{title:t}=e;return(0,s.jsxs)("div",{style:{borderRadius:"20px",overflow:"hidden",border:"1px solid #333",marginBottom:"1.5em"},children:[t&&(0,s.jsx)("div",{style:{background:"#181818",color:"#fff",padding:"0.3em 1em",fontSize:"0.85em",borderBottom:"1px solid #333",letterSpacing:"0.01em"},children:t}),(0,s.jsx)(i.f4,{theme:o,...e,children:t=>{let{className:n,style:i,tokens:o,getLineProps:l,getTokenProps:c}=t,g=0,d=0,u=0;o.forEach((e=>{e.forEach((e=>{const t=c({token:e}).children;"string"==typeof t&&"state_saver"===t.trim()&&d++,"string"==typeof t&&"audio_file"===t.trim()&&u++}))}));let m=0,p=0,f=[];const x=e=>{const t=(e-1)%3;return 0===t?"custom-highlight-yellow-dark":1===t?{color:"#ff69b4"}:{color:"#42a5f5"}};return(0,s.jsx)("pre",{className:n,style:{...i,border:"none",borderRadius:0,color:"bash"===e.language?"#ffffff":i.color,margin:0},children:o.map(((t,n)=>{const i=t.map((e=>c({token:e}).children)).join("");return/^\s*#/.test(i)?(0,s.jsx)("div",{...l({line:t}),children:t.map(((t,n)=>{const i=c({token:t});return(0,s.jsx)("span",{className:(e.language,"custom-highlight-comment"),children:i.children},n)}))},n):(0,s.jsx)("div",{...l({line:t}),children:t.map(((t,n)=>{const i=c({token:t});let o=i.children;if("bash"===e.language)return(0,s.jsx)("span",{style:{color:"#ffffff"},children:o},n);const l=[];let j,y=0;for(;null!==(j=a.exec(o));){if(j.index>y){let e=o.slice(y,j.index).replace(r,(e=>`<span class="${h[e]}">${e}</span>`));e=e.replace(/\\b\\d+(?:\\.\\d+)?\\b/g,(e=>`<span class="custom-highlight-purple">${e}</span>`)),l.push(e)}l.push(`<span class="custom-highlight-yellow">${j[0]}</span>`),y=j.index+j[0].length}if(y<o.length){let e=o.slice(y).replace(r,(e=>`<span class="${h[e]}">${e}</span>`));e=e.replace(/\\b\\d+(?:\\.\\d+)?\\b/g,(e=>`<span class="custom-highlight-purple">${e}</span>`)),l.push(e)}const w=l.join("");if("string"==typeof o&&"prompt"===o.trim())return g++,1===g?(0,s.jsx)("span",{className:"custom-highlight-orange",children:o},n):2===g?(0,s.jsx)("span",{style:{color:"#fff"},children:o},n):(0,s.jsx)("span",{...i},n);if("string"==typeof o&&"audio_file"===o.trim())return p++,3===u&&2===p?(0,s.jsx)("span",{className:"custom-highlight-orange",children:o},n):(0,s.jsx)("span",{...i},n);if("string"==typeof o&&"state_saver"===o.trim())return m++,1===d&&1===m||2===d&&1===m||3===d&&2===m?(0,s.jsx)("span",{className:"custom-highlight-orange",children:o},n):(0,s.jsx)("span",{...i},n);if("("===o||"{"===o||"["===o){f.push(o);const e=f.length,t=x(e);return"string"==typeof t?(0,s.jsx)("span",{className:t,children:o},n):(0,s.jsx)("span",{style:t,children:o},n)}if(")"===o||"}"===o||"]"===o){const e=f.length,t=x(e);let i;i="string"==typeof t?(0,s.jsx)("span",{className:t,children:o},n):(0,s.jsx)("span",{style:t,children:o},n);const h=f[f.length-1];return(")"===o&&"("===h||"}"===o&&"{"===h||"]"===o&&"["===h)&&f.pop(),i}return w!==o?(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:w}},n):(0,s.jsx)("span",{...i},n)}))},n)}))})}})]})}},8453:(e,t,n)=>{n.d(t,{R:()=>h,x:()=>r});var i=n(6540);const s={},o=i.createContext(s);function h(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:h(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);