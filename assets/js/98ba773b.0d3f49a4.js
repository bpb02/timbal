"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[974],{1771:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"concepts/index","title":"Overview","description":"Welcome to Timbal! This guide will help you understand the core concepts and start building amazing AI applications!","source":"@site/docs/concepts/index.mdx","sourceDirName":"concepts","slug":"/concepts/","permalink":"/timbal/docs/concepts/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Overview","sidebar":"docsSidebar"},"sidebar":"docsSidebar","previous":{"title":"Model Capabilities","permalink":"/timbal/docs/get-started/model_capabilities"},"next":{"title":"Agents","permalink":"/timbal/docs/concepts/agents"}}');var s=t(4848),l=t(8453);t(6540),t(6289),t(539),t(9303);const a={title:"Overview",sidebar:"docsSidebar"},d=void 0,r={},o=[{value:"Core Concept: Flows and Agents as DAGs",id:"core-concept-flows-and-agents-as-dags",level:2},{value:"What is a DAG?",id:"what-is-a-dag",level:2},{value:"Creating a Flow",id:"creating-a-flow",level:2},{value:"Builder Pattern",id:"builder-pattern",level:3},{value:"Adding Steps to Flow",id:"adding-steps-to-flow",level:2},{value:"Multiple Steps",id:"multiple-steps",level:3},{value:"Step Functions",id:"step-functions",level:3},{value:"Connecting  Steps",id:"connecting--steps",level:2},{value:"Basic Linking",id:"basic-linking",level:3},{value:"Data Management",id:"data-management",level:2},{value:"Setting Data",id:"setting-data",level:2},{value:"Setting Input Data",id:"setting-input-data",level:3},{value:"Handling Outputs",id:"handling-outputs",level:3},{value:"Smart Data Flow",id:"smart-data-flow",level:3},{value:"State Management",id:"state-management",level:2},{value:"Key Features",id:"key-features",level:2},{value:"1. Flexible Steps",id:"1-flexible-steps",level:3},{value:"2. Smart Data Flow",id:"2-smart-data-flow",level:3},{value:"3. State Management",id:"3-state-management",level:3},{value:"4. Error Handling",id:"4-error-handling",level:3},{value:"Running",id:"running",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Welcome to Timbal! This guide will help you understand the core concepts and start building amazing AI applications!"}),"\n",(0,s.jsx)(n.h2,{id:"core-concept-flows-and-agents-as-dags",children:"Core Concept: Flows and Agents as DAGs"}),"\n",(0,s.jsxs)(n.p,{children:["In Timbal, everything is built around ",(0,s.jsx)("span",{style:{color:"var(--timbal-purple)"},children:(0,s.jsx)("strong",{children:"flows"})})," and ",(0,s.jsx)("span",{style:{color:"var(--timbal-purple)"},children:(0,s.jsx)("strong",{children:"agents"})})," represented as ",(0,s.jsx)(n.strong,{children:"directed acyclic graphs (DAGs)"}),". Think of them as flowcharts for your AI applications!"]}),"\n",(0,s.jsx)(n.h2,{id:"what-is-a-dag",children:"What is a DAG?"}),"\n",(0,s.jsx)(n.p,{children:"A DAG is a special type of graph that:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Has directed connections (arrows) between nodes"}),"\n",(0,s.jsx)(n.li,{children:"Never loops back on itself (no cycles)"}),"\n",(0,s.jsx)(n.li,{children:"Has a clear start and end"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"In Timbal:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Each ",(0,s.jsx)(n.strong,{children:"node"})," is a ",(0,s.jsx)(n.code,{children:"step"})," in your flow"]}),"\n",(0,s.jsxs)(n.li,{children:["Each ",(0,s.jsx)(n.strong,{children:"edge"})," is a ",(0,s.jsx)(n.code,{children:"link"})," between steps"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.strong,{children:"direction"})," shows the execution order"]}),"\n"]}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("img",{src:"/timbal/img/dag_example.png",alt:"DAG Example",style:{width:"70%"}})}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-flow",children:"Creating a Flow"}),"\n",(0,s.jsxs)(n.p,{children:["Let's start by importing the ",(0,s.jsx)(n.code,{children:"Flow"})," class:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from timbal import Flow\n"})}),"\n",(0,s.jsx)(n.p,{children:"Create a new flow with an optional identifier:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow_1 = Flow(id="my-flow")  # Custom ID\nflow_2 = Flow()              # Default ID: "flow"\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"Why Use IDs?",type:"tip",children:[(0,s.jsx)(n.p,{children:"IDs are super useful when:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creating multiple flows"}),"\n",(0,s.jsx)(n.li,{children:"Composing flows together"}),"\n",(0,s.jsx)(n.li,{children:"Debugging complex applications"}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"builder-pattern",children:"Builder Pattern"}),"\n",(0,s.jsx)(n.p,{children:"Timbal uses the builder pattern for clean, readable flows. Here are three ways to build:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Method 1: Traditional\nflow = Flow()\nflow.add_step()\nflow.add_step()\n\n# Method 2: Reassignment\nflow = Flow()\nflow = flow.add_step()\nflow = flow.add_step()\n\n# Method 3: Method Chaining (Recommended) \u2b50\nflow = (\n    Flow()\n    .add_step()\n    .add_step()\n)\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Why Method Chaining?",type:"tip",children:[(0,s.jsx)(n.p,{children:"The method chaining approach:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Makes flow structure more visible"}),"\n",(0,s.jsx)(n.li,{children:"Reduces repetition"}),"\n",(0,s.jsx)(n.li,{children:"Keeps configuration in one block"}),"\n"]})]}),"\n",(0,s.jsx)(n.p,{children:"Choose whichever style matches your preferences and coding standards!"}),"\n",(0,s.jsx)(n.p,{children:"Now that we have initialized our flow, we can start by adding methods."}),"\n",(0,s.jsx)(n.h2,{id:"adding-steps-to-flow",children:"Adding Steps to Flow"}),"\n",(0,s.jsx)(n.p,{children:"Let's explore how to add steps to your flow!"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"flow.add_step(handler)\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"Simple, right?",type:"success",children:(0,s.jsx)(n.p,{children:"You've just added your first step!"})}),"\n",(0,s.jsx)(n.h3,{id:"multiple-steps",children:"Multiple Steps"}),"\n",(0,s.jsx)(n.p,{children:"But what about adding more steps?"}),"\n",(0,s.jsx)(n.p,{children:"If you try this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"flow.add_step(handler)\nflow.add_step(handler) # \u26a0\ufe0f This will raise an error!\n"})}),"\n",(0,s.jsx)(n.admonition,{title:"Why Did This Fail?",type:"warning",children:(0,s.jsxs)(n.p,{children:["This will raise an error because the step ",(0,s.jsx)(n.code,{children:"handler"})," already exists."]})}),"\n",(0,s.jsx)(n.p,{children:"But if we want two nodes to have the same function?"}),"\n",(0,s.jsxs)(n.admonition,{title:"Solution: Named Steps",type:"tip",children:[(0,s.jsx)(n.p,{children:"Want to add the same function multiple times? Use named steps:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow.add_step("step_1", handler) # \u2705 Works!\nflow.add_step("step_2", handler) # \u2705 Works too!\n'})})]}),"\n",(0,s.jsx)(n.p,{children:"Now we have two steps with the same function."}),"\n",(0,s.jsx)(n.h3,{id:"step-functions",children:"Step Functions"}),"\n",(0,s.jsx)(n.p,{children:"Fantastic! You know how to put a handler in the step. Let's go a little deeper."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"What can be in a step?"}),"\nAny Python function can be a step! Here's how to set it up:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def handler(x: int = Field(description="The input to the handler")):\n    print(x)\n'})}),"\n",(0,s.jsxs)(n.admonition,{title:"Pro Tip",type:"tip",children:[(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"Field"})," for:"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic validation"}),"\n",(0,s.jsx)(n.li,{children:"Clear documentation"}),"\n",(0,s.jsx)(n.li,{children:"Better tool integration"}),"\n"]})]}),"\n",(0,s.jsx)(n.p,{children:"Now that you have seen how to set up the function. Imagine if you have 10 inputs and you want to pass them to the step.\nTired of setting data maps for multiple inputs? We've got you covered!"}),"\n",(0,s.jsxs)(n.admonition,{title:"Easy Input Setting",type:"tip",children:[(0,s.jsx)(n.p,{children:"Pass multiple inputs easily:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow.add_step("step_1", handler, x=1, y=2)  # \ud83c\udfaf All inputs in one line!\n'})})]}),"\n",(0,s.jsx)(n.p,{children:"Now that you can add as many steps as you want, let's try to connect them."}),"\n",(0,s.jsx)(n.h2,{id:"connecting--steps",children:"Connecting  Steps"}),"\n",(0,s.jsx)(n.h3,{id:"basic-linking",children:"Basic Linking"}),"\n",(0,s.jsx)(n.p,{children:"Connect steps like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow = (\n    Flow()\n    .add_step("step_1", handler)\n    .add_step("step_2", handler)\n    .add_link("step_1", "step_2") # Creates connection\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"You did it! Now we have a flow with two steps and a link between them."}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsx)("img",{src:"/timbal/img/dag_link.png",alt:"Linked Steps",style:{width:"50%"}})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["See more properties in the ",(0,s.jsx)(n.a,{href:"/timbal/docs/concepts/advanced",children:"advanced"})," section."]})}),"\n",(0,s.jsx)(n.p,{children:"But what about the data?... How we can set the input for each step?"}),"\n",(0,s.jsx)(n.h2,{id:"data-management",children:"Data Management"}),"\n",(0,s.jsx)(n.p,{children:"That's easy! Let's take a look at it:"}),"\n",(0,s.jsx)(n.h2,{id:"setting-data",children:"Setting Data"}),"\n",(0,s.jsxs)(n.p,{children:["Our function ",(0,s.jsx)(n.em,{children:"handler"})," has an input ",(0,s.jsx)(n.em,{children:"x"})," that is an integer. We can set the input of the step like this:"]}),"\n",(0,s.jsx)(n.h3,{id:"setting-input-data",children:"Setting Input Data"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow = (\n    Flow()\n    .add_step("step_1", handler)\n    .set_input("step_1.x", "1")\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"But when this is not the input you can set the data like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:"{4}",children:'flow = (\n    Flow()\n    .add_step("step_1", handler)\n    .set_data_value("step_1.x", 1) # Sets input x=1\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"And the outputs?"}),"\n",(0,s.jsxs)(n.p,{children:["Each output will be the ",(0,s.jsx)(n.code,{children:"return"})," of the step. But we can map the output to the specific name we want to use."]}),"\n",(0,s.jsx)(n.h3,{id:"handling-outputs",children:"Handling Outputs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow.set_output("result", "step_1.return")\n'})}),"\n",(0,s.jsx)(n.p,{children:"And if we have two steps, how can we set the input of the second step as the output of the first step?"}),"\n",(0,s.jsx)(n.p,{children:"We only have to apply the 2 things explained before:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:"{6}",children:'flow = (\n    Flow()\n    .add_step("step_1", handler, x=1)\n    .add_step("step_2", handler)\n    .add_link("step_1", "step_2") # Link the steps\n    .set_data_map("step_2.x", "step_1.return") # Set input of step 2 as the output of step 1\n)\n'})}),"\n",(0,s.jsx)(n.p,{children:"And if we want each step return to be the input of the next step? We have to link all the steps...\nIt is redudant!"}),"\n",(0,s.jsx)(n.admonition,{title:"Smart Linking!",type:"tip",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"set_data_map"})," and ",(0,s.jsx)(n.code,{children:"set_data_value"})," are smart! They automatically create links between steps when needed. This means you can write:"]})}),"\n",(0,s.jsx)(n.h3,{id:"smart-data-flow",children:"Smart Data Flow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'flow = (\n    Flow()\n    .add_step("step_1", handler, x=1)\n    .add_step("step_2", handler)\n    .set_data_map("step_2.x", "step_1.return")  # Link created automatically!\n)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"state-management",children:"State Management"}),"\n",(0,s.jsxs)(n.p,{children:["Save your flow's state with ",(0,s.jsx)(n.code,{children:"InMemorySaver"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from timbal.state.savers import InMemorySaver\n\nflow.compile(state_saver=InMemorySaver())\n"})}),"\n",(0,s.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)("div",{className:"timeline",children:[(0,s.jsx)("div",{className:"timeline-item",children:(0,s.jsxs)("div",{className:"timeline-content",children:[(0,s.jsx)(n.h3,{id:"1-flexible-steps",children:"1. Flexible Steps"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Any Python function can be a step"}),"\n",(0,s.jsx)(n.li,{children:"Custom step classes supported"}),"\n",(0,s.jsx)(n.li,{children:"Built-in specialized steps"}),"\n"]})]})}),(0,s.jsx)("div",{className:"timeline-connector",children:"\u2192"}),(0,s.jsx)("div",{className:"timeline-item",children:(0,s.jsxs)("div",{className:"timeline-content",children:[(0,s.jsx)(n.h3,{id:"2-smart-data-flow",children:"2. Smart Data Flow"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Automatic validation"}),"\n",(0,s.jsx)(n.li,{children:"Type checking"}),"\n",(0,s.jsx)(n.li,{children:"Flexible data mapping"}),"\n"]})]})}),(0,s.jsx)("div",{className:"timeline-connector",children:"\u2192"}),(0,s.jsx)("div",{className:"timeline-item",children:(0,s.jsxs)("div",{className:"timeline-content",children:[(0,s.jsx)(n.h3,{id:"3-state-management",children:"3. State Management"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Memory persistence"}),"\n",(0,s.jsx)(n.li,{children:"State saving"}),"\n",(0,s.jsx)(n.li,{children:"Flow history"}),"\n"]})]})}),(0,s.jsx)("div",{className:"timeline-connector",children:"\u2192"}),(0,s.jsx)("div",{className:"timeline-item",children:(0,s.jsxs)("div",{className:"timeline-content",children:[(0,s.jsx)(n.h3,{id:"4-error-handling",children:"4. Error Handling"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Built-in validation"}),"\n"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Clear error messages"}),"\n",(0,s.jsx)(n.li,{children:"Debugging support"}),"\n"]})]})})]}),"\n",(0,s.jsx)("style",{children:"\n.timeline {\ndisplay: flex;\nalign-items: left;\njustify-content: space-between;\nmargin: 0rem 0;\noverflow-x: auto;\npadding: 1rem;\nmargin-left: -1.5rem;\nmargin-right: -1.5rem;\n}\n\n.timeline-item {\nflex: 1;\nmin-width: 217px;\ntext-align: left;\npadding: 1rem;\nbackground: var(--ifm-background-color);\nborder-radius: 8px;\nbox-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.timeline-connector {\ndisplay: none;\n}\n\n.timeline-content {\npadding: 0.5rem;\n}\n\n.timeline-content h3 {\nmargin-bottom: 0.5rem;\nfont-size: 1rem;\ncolor: var(--timbal-purple);\n}\n\n.timeline-content ul {\nlist-style: disc;\npadding-left: 1.2em;\nmargin: 0;\n}\n\n.timeline-content li {\nmargin: 0.15rem 0;\nfont-size: 0.9rem;\n}\n\nhtml[data-theme='dark'] .timeline-content h3 {\ncolor: var(--timbal-purple) !important;\n}\n\nhtml[data-theme='dark'] .timeline-item {\nbox-shadow: 0 2px 8px 0 #000a; \n}\n"}),"\n",(0,s.jsx)(n.h2,{id:"running",children:"Running"}),"\n",(0,s.jsxs)(n.p,{children:["To run the flow, we can use the ",(0,s.jsx)(n.code,{children:"run()"})," method."]}),"\n",(0,s.jsx)(n.p,{children:"Get detailed execution events:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"async for event in flow.run():\n    print(event) \n"})}),"\n",(0,s.jsx)(n.admonition,{title:"Running the Flow",type:"note",children:(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"run()"})," method returns an async iterator that yields events as the flow executes."]})}),"\n",(0,s.jsx)(n.p,{children:"Or if it does not matter the specific event. Get the final result directly:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"result = await flow.complete()\n"})}),"\n",(0,s.jsx)(n.p,{children:"Now you now the basics of Timbal :)"})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var i=t(6540);const s={},l=i.createContext(s);function a(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);