"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[418],{2120:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"integrations/perplexity","title":"Perplexity","description":"Timbal integrates with Perplexity to provide advanced search and LLM capabilities. This integration allows you to perform web searches and leverage Perplexity\'s models directly within your Timbal workflows.","source":"@site/docs/integrations/perplexity.md","sourceDirName":"integrations","slug":"/integrations/perplexity","permalink":"/docs/integrations/perplexity","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Perplexity","sidebar":"docsSidebar"},"sidebar":"docsSidebar","previous":{"title":"ElevenLabs","permalink":"/docs/integrations/elevenlabs"},"next":{"title":"Twilio","permalink":"/docs/integrations/twilio"}}');var n=i(4848),r=i(8453),h=i(5495);const l={title:"Perplexity",sidebar:"docsSidebar"},o="Perplexity Integration",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"<span><strong>Search</strong></span>",id:"search",level:2},{value:"Description",id:"description",level:3},{value:"Example",id:"example",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Agent Integration Example",id:"agent-integration-example",level:3},{value:"Notes",id:"notes",level:2}];function a(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"perplexity-integration",children:"Perplexity Integration"})}),"\n",(0,n.jsx)(t.p,{children:"Timbal integrates with Perplexity to provide advanced search and LLM capabilities. This integration allows you to perform web searches and leverage Perplexity's models directly within your Timbal workflows."}),"\n",(0,n.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(t.p,{children:"Before using the Perplexity integration, you'll need:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["A Perplexity API key \u2013 ",(0,n.jsx)(t.a,{href:"https://www.perplexity.ai/account/api/keys",children:"Get your API key here"})]}),"\n",(0,n.jsxs)(t.li,{children:["Store your obtained API key in an environment variable named ",(0,n.jsx)(t.code,{children:"PERPLEXITY_API_KEY"})," to facilitate its use by the tools."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"search",children:(0,n.jsx)("span",{style:{color:"var(--timbal-purple)"},children:(0,n.jsx)("strong",{children:"Search"})})}),"\n",(0,n.jsx)(t.h3,{id:"description",children:"Description"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.strong,{children:"search"})," step allows you to perform a web search or interact with Perplexity's LLMs using a variety of parameters for customization."]}),"\n",(0,n.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,n.jsx)(h.A,{language:"python",code:'from timbal.steps.perplexity import search\n\nresult = await search(query="What is the capital of France?")'}),"\n",(0,n.jsx)(t.h3,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{children:"Type"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Required"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"query"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"str"})}),(0,n.jsx)(t.td,{children:"Query to search for."}),(0,n.jsx)(t.td,{children:"Yes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"model"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"str"})}),(0,n.jsxs)(t.td,{children:["Model to use. Default: ",(0,n.jsx)(t.code,{children:"sonar"}),"."]}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"system_prompt"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"str"})}),(0,n.jsx)(t.td,{children:"System prompt to guide the LLM's behavior and role."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"temperature"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"float"})}),(0,n.jsx)(t.td,{children:"Amount of randomness in the response. Ranges from 0 to 2. Default: 0.2"}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"top_p"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"float"})}),(0,n.jsx)(t.td,{children:"Nucleus sampling threshold. Ranges from 0 to 1. Default: 0.9"}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"search_domain_filter"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"list/None"})}),(0,n.jsx)(t.td,{children:"Limit citations to specific domains. Only available in certain tiers."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"return_images"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"bool"})}),(0,n.jsx)(t.td,{children:"Whether to return images in the response. Only available in certain tiers."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"return_related_questions"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"bool"})}),(0,n.jsx)(t.td,{children:"Whether to return related questions. Only available in certain tiers."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"search_recency_filter"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"Literal['month', 'week', 'day', 'hour']"})}),(0,n.jsx)(t.td,{children:"Restrict search results to a recent time interval."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"top_k"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"int"})}),(0,n.jsx)(t.td,{children:"Number of tokens to keep for top-k filtering. 0 disables."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"stream"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"bool"})}),(0,n.jsx)(t.td,{children:"Whether to stream the response."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"presence_penalty"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"float"})}),(0,n.jsx)(t.td,{children:"Penalize new tokens based on presence. Ranges from -2.0 to 2.0."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"frequency_penalty"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"float"})}),(0,n.jsx)(t.td,{children:"Penalize new tokens based on frequency. >1.0 discourages repetition."}),(0,n.jsx)(t.td,{children:"No"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"response_format"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"dict/None"})}),(0,n.jsx)(t.td,{children:"Enable structured outputs with a JSON or Regex schema."}),(0,n.jsx)(t.td,{children:"No"})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"agent-integration-example",children:"Agent Integration Example"}),"\n",(0,n.jsx)(h.A,{language:"python",code:'from timbal.steps.perplexity import search\nfrom timbal import Agent\n\nagent = Agent(\n  tools=[search]\n)\n\nresponse = await agent.complete(prompt="What are the latest AI trends?")'}),"\n",(0,n.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["For more advanced usage, see the ",(0,n.jsx)(t.a,{href:"https://docs.perplexity.ai/api-reference/chat-completions",children:"Perplexity API documentation"}),"."]}),"\n"]})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},5495:(e,t,i)=>{i.d(t,{A:()=>c});i(6540);var s=i(1765),n=i(4848);(void 0!==i.g?i.g:window).Prism=s.My;const r={...s.Zj.github,plain:{...s.Zj.github.plain,backgroundColor:"#181818",color:"#ffffff"},styles:s.Zj.github.styles.map((e=>({...e,types:e.types})))},h={from:"custom-highlight-pink",import:"custom-highlight-pink","=":"custom-highlight-pink",timbal:"custom-highlight-green",Agent:"custom-highlight-green",steps:"custom-highlight-green",perplexity:"custom-highlight-green",InMemorySaver:"custom-highlight-green",RunContext:"custom-highlight-green",twilio:"custom-highlight-green",whatsapp:"custom-highlight-green",model:"custom-highlight-orange",query:"custom-highlight-orange",context:"custom-highlight-orange",system_prompt:"custom-highlight-orange",tools:"custom-highlight-orange",parent_id:"custom-highlight-orange",id:"custom-highlight-orange",model_id:"custom-highlight-orange",to:"custom-highlight-orange",message:"custom-highlight-orange",template_sid:"custom-highlight-orange",template_params:"custom-highlight-orange",text:"custom-highlight-orange",voice_id:"custom-highlight-orange",memory_id:"custom-highlight-orange",memory_window_size:"custom-highlight-orange","(":"custom-highlight-yellow-dark",")":"custom-highlight-yellow-dark","[":"custom-highlight-purple-pink","]":"custom-highlight-purple-pink","{":"custom-highlight-yellow-dark","}":"custom-highlight-yellow-dark",",":"#fffff",Flow:"custom-highlight-green",await:"custom-highlight-pink",def:"custom-highlight-blue",async:"custom-highlight-blue","-":"#fffff",">":"#fffff",":":"#fffff",".":"#fffff",state:"custom-highlight-green",savers:"custom-highlight-green",Tool:"custom-highlight-green",TimbalPlatformSaver:"custom-highlight-green",return:"custom-highlight-pink",for:"custom-highlight-pink",in:"custom-highlight-pink",if:"custom-highlight-pink",datetime:"custom-highlight-green",elevenlabs:"custom-highlight-green",types:"custom-highlight-green",File:"custom-highlight-green",get_datetime:"custom-highlight-green-fn",send_whatsapp_message:"custom-highlight-green-fn",send_whatsapp_template:"custom-highlight-green-fn",validate:"custom-highlight-green-fn",complete:"custom-highlight-green-fn",print:"custom-highlight-green-fn",search:"custom-highlight-green-fn",search_internet:"custom-highlight-green-fn",stt:"custom-highlight-green-fn",tts:"custom-highlight-green-fn",run:"custom-highlight-green-fn",search_web:"custom-highlight-green-fn",set_input:"custom-highlight-green-fn",extract_text:"custom-highlight-green-fn",text_processor:"custom-highlight-green-fn",convert_to_database:"custom-highlight-green-fn",get_weather:"custom-highlight-green-fn",get_time:"custom-highlight-green-fn",add_step:"custom-highlight-green-fn",add_link:"custom-highlight-green-fn",set_output:"custom-highlight-green-fn",parse_documentation:"custom-highlight-green-fn",create_database:"custom-highlight-green-fn",add_llm:"custom-highlight-green-fn",compile:"custom-highlight-green-fn",str:"custom-highlight-green"},l=new RegExp(`(${Object.keys(h).map((e=>/^[a-zA-Z0-9_]+$/.test(e)?`\\b${e}\\b`:e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|")})`,"g"),o=/"([^"]*)"/g;function c(e){const{title:t}=e;return(0,n.jsxs)("div",{style:{borderRadius:"20px",overflow:"hidden",border:"1px solid #333",marginBottom:"1.5em"},children:[t&&(0,n.jsx)("div",{style:{background:"#181818",color:"#fff",padding:"0.3em 1em",fontSize:"0.85em",borderBottom:"1px solid #333",letterSpacing:"0.01em"},children:t}),(0,n.jsx)(s.f4,{theme:r,...e,children:t=>{let{className:i,style:s,tokens:r,getLineProps:c,getTokenProps:d}=t,a=0,g=0,p=0;r.forEach((e=>{e.forEach((e=>{const t=d({token:e}).children;"string"==typeof t&&"state_saver"===t.trim()&&g++,"string"==typeof t&&"audio_file"===t.trim()&&p++}))}));let m=0,u=0,x=[];const j=e=>{const t=(e-1)%3;return 0===t?"custom-highlight-yellow-dark":1===t?{color:"#ff69b4"}:{color:"#42a5f5"}};return(0,n.jsx)("pre",{className:i,style:{...s,border:"none",borderRadius:0,color:"bash"===e.language?"#ffffff":s.color,margin:0},children:r.map(((t,i)=>{const s=t.map((e=>d({token:e}).children)).join("");return/^\s*#/.test(s)?(0,n.jsx)("div",{...c({line:t}),children:t.map(((t,i)=>{const s=d({token:t});return(0,n.jsx)("span",{className:(e.language,"custom-highlight-comment"),children:s.children},i)}))},i):(0,n.jsx)("div",{...c({line:t}),children:t.map(((t,i)=>{const s=d({token:t});let r=s.children;if("bash"===e.language)return(0,n.jsx)("span",{style:{color:"#ffffff"},children:r},i);const c=[];let f,y=0;for(;null!==(f=o.exec(r));){if(f.index>y){let e=r.slice(y,f.index).replace(l,(e=>`<span class="${h[e]}">${e}</span>`));e=e.replace(/\\b\\d+(?:\\.\\d+)?\\b/g,(e=>`<span class="custom-highlight-purple">${e}</span>`)),c.push(e)}c.push(`<span class="custom-highlight-yellow">${f[0]}</span>`),y=f.index+f[0].length}if(y<r.length){let e=r.slice(y).replace(l,(e=>`<span class="${h[e]}">${e}</span>`));e=e.replace(/\\b\\d+(?:\\.\\d+)?\\b/g,(e=>`<span class="custom-highlight-purple">${e}</span>`)),c.push(e)}const b=c.join("");if("string"==typeof r&&"prompt"===r.trim())return a++,1===a?(0,n.jsx)("span",{className:"custom-highlight-orange",children:r},i):2===a?(0,n.jsx)("span",{style:{color:"#fff"},children:r},i):(0,n.jsx)("span",{...s},i);if("string"==typeof r&&"audio_file"===r.trim())return u++,3===p&&2===u?(0,n.jsx)("span",{className:"custom-highlight-orange",children:r},i):(0,n.jsx)("span",{...s},i);if("string"==typeof r&&"state_saver"===r.trim())return m++,1===g&&1===m||2===g&&1===m||3===g&&2===m?(0,n.jsx)("span",{className:"custom-highlight-orange",children:r},i):(0,n.jsx)("span",{...s},i);if("("===r||"{"===r||"["===r){x.push(r);const e=x.length,t=j(e);return"string"==typeof t?(0,n.jsx)("span",{className:t,children:r},i):(0,n.jsx)("span",{style:t,children:r},i)}if(")"===r||"}"===r||"]"===r){const e=x.length,t=j(e);let s;s="string"==typeof t?(0,n.jsx)("span",{className:t,children:r},i):(0,n.jsx)("span",{style:t,children:r},i);const h=x[x.length-1];return(")"===r&&"("===h||"}"===r&&"{"===h||"]"===r&&"["===h)&&x.pop(),s}return b!==r?(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:b}},i):(0,n.jsx)("span",{...s},i)}))},i)}))})}})]})}},8453:(e,t,i)=>{i.d(t,{R:()=>h,x:()=>l});var s=i(6540);const n={},r=s.createContext(n);function h(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:h(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);